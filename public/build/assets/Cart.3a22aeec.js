import{m as T,H as B,L as F,b as L,s as w}from"./app.f1de3385.js";import{_ as N,F as H}from"./FrontLayout.01d377bf.js";import{_}from"./_plugin-vue_export-helper.cdc0426e.js";import{aS as s,ae as n,af as t,aY as v,_ as f,bH as $,am as p,bk as m,a1 as b,aZ as c,aX as j,ac as k,al as I,ad as h,aV as M,aT as Q}from"./runtime-dom.esm-bundler.585c24df.js";/* empty css            */import"./ResponsiveNavLink.baeb7a52.js";const D={props:{value:{type:[Number,String],default:null},type:{type:String,default:"text",validator:e=>["text","email","number","date","password","month","tel"].includes(e)},variant:{type:String,default:"prepend",validator:e=>["append","prepend"].includes(e)},label:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""}}},V={key:0,class:"flex flex-nowrap items-stretch w-full relative rounded-full overflow-hidden border border-gray-300 focus-within:border-primary-300 focus-within:outline-none focus-within:ring focus-within:ring-primary-200 focus-within:ring-opacity-50"},z={class:"flex -mr-px bg-gray-200"},G={class:"w-10 flex items-center justify-center leading-normal whitespace-no-wrap text-grey-dark text-xs font-semibold uppercase"},O=["type","value","placeholder"],P={key:1,class:"flex flex-nowrap items-stretch w-full relative rounded-full overflow-hidden border border-gray-300 focus-within:border-primary-300 focus-within:outline-none focus-within:ring focus-within:ring-primary-200 focus-within:ring-opacity-50"},E=["type","value","placeholder"],Y={class:"flex -mr-px bg-gray-200"},A={class:"flex items-center leading-normal px-3 whitespace-no-wrap text-grey-dark text-xs font-semibold uppercase"};function R(e,o,a,g,u,d){return a.variant=="prepend"?(s(),n("div",V,[t("div",z,[t("span",G,[v(e.$slots,"default",{},()=>[t("span",null,f(a.label),1)])])]),t("input",{type:a.type,onBlur:o[0]||(o[0]=r=>e.$emit("blur",r.target.value)),onInput:o[1]||(o[1]=r=>e.$emit("input",r.target.value)),value:a.value,class:"flex-shrink flex-grow leading-normal w-px flex-1 h-6 rounded rounded-l-none px-3 relative focus:outline-none",placeholder:a.placeholder},null,40,O)])):(s(),n("div",P,[t("input",{type:a.type,onBlur:o[2]||(o[2]=r=>e.$emit("blur",r.target.value)),onInput:o[3]||(o[3]=r=>e.$emit("input",r.target.value)),value:a.value,class:"flex-shrink flex-grow leading-normal w-px flex-1 h-6 px-3 relative focus:outline-none",placeholder:a.placeholder},null,40,E),t("div",Y,[t("span",A,[v(e.$slots,"default",{},()=>[t("span",null,f(a.label),1)])])])]))}const U=_(D,[["render",R]]),K={},X=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Z=[X];function J(e,o,a,g,u,d){return s(),n("button",{type:"button",onClick:o[0]||(o[0]=$(r=>e.$emit("click"),["prevent"])),class:"text-gray-400 hover:text-red-500 cursor-pointer"},Z)}const W=_(K,[["render",J]]);const tt={computed:{...T({cartItems:"cart/getCartItems",totalItems:"cart/getTotalItem",totalPrice:"cart/getTotalPrice",totalDiscount:"cart/getTotalDiscount",grandTotal:"cart/getGrandTotal"}),orderItems(){return this.cartItems.map(e=>({book_id:e.id,quantity:e.quantity}))}},components:{FrontLayout:N,Head:B,Link:F,FormInputGroup:U,FormButton:H,RemoveIconButton:W},data(){return{coupon:{type:null,coupon_code:null,coupon_amount:null,coupon_expiry:null,status:null},loading:!1}},methods:{...L({cartItemQuantity:"cart/CART_ITEM_QUANTITY"}),removeFromCart(e){w.dispatch("cart/removeFromCart",e)},changedQuantity(e,o){this.cartItemQuantity({item:o,val:e})},currencyFormat(e){return"Kes "+new Intl.NumberFormat("en-US").format(Math.round(e))},async placeOrder(){this.loading=!0;try{await axios.get("/sanctum/csrf-cookie").then(e=>{e&&axios.post(route("orders.store"),{customer_id:this.$page.props.user.id,totalDiscount:0,orderItems:this.orderItems})&&(this.$swal("Order created successfully!"),w.dispatch("cart/resetCart"),window.location.href=route("myorders"),this.loading=!1)})}catch(e){console.log(e)}}}},l=e=>(M("data-v-1e8a73fb"),e=e(),Q(),e),et={class:"container mx-auto my-5"},ot={class:"lg:flex"},st={class:"lg:w-9/12 lg:mr-5"},nt=l(()=>t("h5",{class:"font-semibold text-xl mb-3"},"Booklist Items",-1)),at={key:0,class:"rounded-primary overflow-hidden"},rt={class:"overflow-x-auto overflow-y-hidden w-full"},lt={class:"filament-tables-table w-full text-left rtl:text-right divide-y table-auto"},it=l(()=>t("thead",null,[t("tr",{class:"bg-primary-600"},[t("th",{class:"text-white"},"Book"),t("th",{class:"text-white"},"Name"),t("th",{class:"text-white"},"Price"),t("th",{class:"text-white"},"Quantity"),t("th",{class:"text-white"},"Total"),t("th",{class:"text-white"})])],-1)),dt={class:"bg-white divide-y divide-gray-200 pb-3"},ct={class:"px-3"},ut={class:"h-16 w-16"},pt=["src","alt"],mt=l(()=>t("td",null,[t("span",{class:"px-3 py-1.5 bg-orange-200 text-orange-700 text-center rounded-full text-sm"},"pending quotation")],-1)),ht=["onInput","value"],ft=l(()=>t("td",null,[t("span",{class:"font-semibold"},[t("span",null,"pending quotation")])],-1)),_t={key:1},gt=l(()=>t("div",{class:"flex flex-col items-center justify-center text-gray-300 h-44 bg-gray-50 rounded-lg"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),t("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"})]),t("p",{class:"mt-2 text-gray-400"},"Your Book List is Empty!")],-1)),yt=[gt],xt={key:0,class:"md:w-6/12 lg:w-3/12 mt-10 lg:mt-0"},wt=l(()=>t("h5",{class:"font-semibold text-xl mb-3"},"Cart Details",-1)),vt=l(()=>t("div",{class:"bg-gray-200 p-4 rounded-primary"},[t("p",{class:"flex justify-between py-2 text-sm"},[t("span",{class:"font-medium"}," Sub Total: "),t("span",{class:"font-bold"}," request quotation first ")]),t("p",{class:"flex justify-between py-2 text-sm border-b border-gray-300"},[t("span",{class:"font-medium"}," Discount: "),t("span",{class:"font-bold"}," request quotation first ")]),t("p",{class:"flex justify-between py-2 text-sm"},[t("span",{class:"font-medium"}," Cart Total: "),t("span",{class:"font-bold"}," request quotation first ")])],-1)),bt={key:0,class:"spinner-border",role:"status"},kt=l(()=>t("span",{class:"visually-hidden"},"Please wait, Loading...",-1)),It=[kt],$t={key:1},Ct={key:1},qt=l(()=>t("span",{class:"my-5 block text-center font-medium text-lg"},"or",-1));function St(e,o,a,g,u,d){const r=c("Head"),C=c("remove-icon-button"),y=c("Link"),q=c("FrontLayout");return s(),n(b,null,[p(r,{title:"Cart"}),p(q,null,{default:m(()=>[t("div",et,[t("div",ot,[t("div",st,[nt,e.cartItems.length?(s(),n("div",at,[t("div",rt,[t("table",lt,[it,t("tbody",dt,[(s(!0),n(b,null,j(e.cartItems,(i,S)=>(s(),n("tr",{key:S},[t("td",ct,[t("div",ut,[t("img",{src:i.featured_image,class:"w-full h-full object-cover",alt:i.name},null,8,pt)])]),t("td",null,f(i.name),1),mt,t("td",null,[t("input",{onInput:x=>d.changedQuantity(x,i),value:i.quantity,type:"number"},null,40,ht)]),ft,t("td",null,[p(C,{onClick:x=>d.removeFromCart(i)},null,8,["onClick"])])]))),128))])])])])):(s(),n("div",_t,yt))]),e.cartItems.length?(s(),n("div",xt,[wt,vt,e.$page.props.user?(s(),n("button",{key:0,class:"w-full mt-8 text-sm bg-primary text-white px-6 py-3 block rounded-md text-center",onClick:o[0]||(o[0]=$((...i)=>d.placeOrder&&d.placeOrder(...i),["prevent"]))},[u.loading?(s(),n("div",bt,It)):(s(),n("span",$t,"Get a Quotation now"))])):(s(),n("div",Ct,[e.cartItems.length?(s(),k(y,{key:0,class:"w-full mt-8 text-sm bg-primary text-white px-6 py-3 block rounded-md text-center text-decoration-none",href:e.route("login")},{default:m(()=>[I("Login to request a quotation")]),_:1},8,["href"])):h("",!0),qt,e.cartItems.length?(s(),k(y,{key:1,class:"w-full mt-8 text-sm bg-redish text-white px-6 py-3 block rounded-md text-center text-decoration-none",href:e.route("register")},{default:m(()=>[I("Sign up to request a quotation")]),_:1},8,["href"])):h("",!0)]))])):h("",!0)])])]),_:1})],64)}const jt=_(tt,[["render",St],["__scopeId","data-v-1e8a73fb"]]);export{jt as default};
