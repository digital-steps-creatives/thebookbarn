import{_,o as s,e as n,a as t,r as w,t as f,j as $,P as F,H as q,L as T,Q as L,S as v,b as p,w as m,F as b,C as c,i as N,c as k,g as I,f as h,N as j,O as Q}from"./app.734a16c0.js";import{_ as H}from"./FrontLayout.bae5aa51.js";import{F as M}from"./CartDropdown.1e7f7022.js";import"./ResponsiveNavLink.9ab9b8ea.js";import"./Banner.7e27dd2a.js";import"./DropdownLink.726166a2.js";const D={props:{value:{type:[Number,String],default:null},type:{type:String,default:"text",validator:e=>["text","email","number","date","password","month","tel"].includes(e)},variant:{type:String,default:"prepend",validator:e=>["append","prepend"].includes(e)},label:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""}}},P={key:0,class:"flex flex-nowrap items-stretch w-full relative rounded-full overflow-hidden border border-gray-300 focus-within:border-primary-300 focus-within:outline-none focus-within:ring focus-within:ring-primary-200 focus-within:ring-opacity-50"},O={class:"flex -mr-px bg-gray-200"},V={class:"w-10 flex items-center justify-center leading-normal whitespace-no-wrap text-grey-dark text-xs font-semibold uppercase"},z=["type","value","placeholder"],G={key:1,class:"flex flex-nowrap items-stretch w-full relative rounded-full overflow-hidden border border-gray-300 focus-within:border-primary-300 focus-within:outline-none focus-within:ring focus-within:ring-primary-200 focus-within:ring-opacity-50"},E=["type","value","placeholder"],A={class:"flex -mr-px bg-gray-200"},R={class:"flex items-center leading-normal px-3 whitespace-no-wrap text-grey-dark text-xs font-semibold uppercase"};function U(e,o,r,g,u,d){return r.variant=="prepend"?(s(),n("div",P,[t("div",O,[t("span",V,[w(e.$slots,"default",{},()=>[t("span",null,f(r.label),1)])])]),t("input",{type:r.type,onBlur:o[0]||(o[0]=a=>e.$emit("blur",a.target.value)),onInput:o[1]||(o[1]=a=>e.$emit("input",a.target.value)),value:r.value,class:"flex-shrink flex-grow leading-normal w-px flex-1 h-6 rounded rounded-l-none px-3 relative focus:outline-none",placeholder:r.placeholder},null,40,z)])):(s(),n("div",G,[t("input",{type:r.type,onBlur:o[2]||(o[2]=a=>e.$emit("blur",a.target.value)),onInput:o[3]||(o[3]=a=>e.$emit("input",a.target.value)),value:r.value,class:"flex-shrink flex-grow leading-normal w-px flex-1 h-6 px-3 relative focus:outline-none",placeholder:r.placeholder},null,40,E),t("div",A,[t("span",R,[w(e.$slots,"default",{},()=>[t("span",null,f(r.label),1)])])])]))}const Y=_(D,[["render",U]]),K={},J=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),W=[J];function X(e,o,r,g,u,d){return s(),n("button",{type:"button",onClick:o[0]||(o[0]=$(a=>e.$emit("click"),["prevent"])),class:"text-gray-400 hover:text-red-500 cursor-pointer"},W)}const Z=_(K,[["render",X]]);const tt={computed:{...F({cartItems:"cart/getCartItems",totalItems:"cart/getTotalItem",totalPrice:"cart/getTotalPrice",totalDiscount:"cart/getTotalDiscount",grandTotal:"cart/getGrandTotal"}),orderItems(){return this.cartItems.map(e=>({book_id:e.id,quantity:e.quantity}))}},components:{FrontLayout:H,Head:q,Link:T,FormInputGroup:Y,FormButton:M,RemoveIconButton:Z},data(){return{coupon:{type:null,coupon_code:null,coupon_amount:null,coupon_expiry:null,status:null},loading:!1}},methods:{...L({cartItemQuantity:"cart/CART_ITEM_QUANTITY"}),removeFromCart(e){v.dispatch("cart/removeFromCart",e)},changedQuantity(e,o){this.cartItemQuantity({item:o,val:e})},currencyFormat(e){return"Kes "+new Intl.NumberFormat("en-US").format(Math.round(e))},async placeOrder(){this.loading=!0;try{await axios.get("/sanctum/csrf-cookie").then(e=>{e&&axios.post(route("orders.store"),{customer_id:this.$page.props.user.id,totalDiscount:0,orderItems:this.orderItems}).then(o=>{o&&(Swal.fire({title:"Order created successfully!",timer:2e3,icon:"success",timerProgressBar:!0,showConfirmButton:!1}),v.dispatch("cart/resetCart"),window.location.href=route("myorders"),this.loading=!1)})})}catch(e){console.log(e)}}}},l=e=>(j("data-v-d6347fc1"),e=e(),Q(),e),et={class:"container mx-auto my-5"},ot={class:"lg:flex"},st={class:"lg:w-9/12 lg:mr-5"},nt=l(()=>t("h5",{class:"font-semibold text-xl mb-3"},"Booklist Items",-1)),rt={key:0,class:"rounded-primary overflow-hidden"},at={class:"overflow-x-auto overflow-y-hidden w-full"},lt={class:"filament-tables-table w-full text-left rtl:text-right divide-y table-auto"},it=l(()=>t("thead",null,[t("tr",{class:"bg-primary-600"},[t("th",{class:"text-white"},"Book"),t("th",{class:"text-white"},"Name"),t("th",{class:"text-white"},"Price"),t("th",{class:"text-white"},"Quantity"),t("th",{class:"text-white"})])],-1)),dt={class:"bg-white divide-y divide-gray-200 pb-3"},ct={class:"px-3"},ut={class:"h-16 w-16"},pt=["src","alt"],mt={class:"px-3 text-sm"},ht=l(()=>t("td",{class:"px-3"},[t("span",{class:"text-orange-700 inline-flex text-center rounded-full text-sm"},"pending quotation")],-1)),ft={class:"px-3"},_t=["onInput","value"],gt={class:"px-3"},yt=l(()=>t("tfoot",null,null,-1)),xt={key:1},wt=l(()=>t("div",{class:"flex flex-col items-center justify-center text-gray-300 h-44 bg-gray-50 rounded-lg"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),t("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"})]),t("p",{class:"mt-2 text-gray-400"},"Your Book List is Empty!")],-1)),vt=[wt],bt={key:0,class:"md:w-6/12 lg:w-3/12 mt-10 lg:mt-0"},kt=l(()=>t("h5",{class:"font-semibold text-xl mb-3"},"Cart Details",-1)),It=l(()=>t("div",{class:"bg-gray-200 p-4 rounded-primary"},[t("p",{class:"flex justify-between py-2 text-sm"},[t("span",{class:"font-medium"}," Sub Total: "),t("span",{class:"font-bold"}," request quotation first ")]),t("p",{class:"flex justify-between py-2 text-sm border-b border-gray-300"},[t("span",{class:"font-medium"}," Discount: "),t("span",{class:"font-bold"}," request quotation first ")]),t("p",{class:"flex justify-between py-2 text-sm"},[t("span",{class:"font-medium"}," Cart Total: "),t("span",{class:"font-bold"}," request quotation first ")])],-1)),$t={key:0,class:"spinner-border",role:"status"},Ct=l(()=>t("span",{class:"visually-hidden"},"Please wait, Loading...",-1)),Bt=[Ct],St={key:1},Ft={key:1},qt=l(()=>t("span",{class:"my-5 block text-center font-medium text-lg"},"or",-1));function Tt(e,o,r,g,u,d){const a=c("Head"),C=c("remove-icon-button"),y=c("Link"),B=c("FrontLayout");return s(),n(b,null,[p(a,{title:"Cart"}),p(B,null,{default:m(()=>[t("div",et,[t("div",ot,[t("div",st,[nt,e.cartItems.length?(s(),n("div",rt,[t("div",at,[t("table",lt,[it,t("tbody",dt,[(s(!0),n(b,null,N(e.cartItems,(i,S)=>(s(),n("tr",{key:S},[t("td",ct,[t("div",ut,[t("img",{src:i.featured_image,class:"w-full h-full object-cover py-2",alt:i.name},null,8,pt)])]),t("td",mt,f(i.name),1),ht,t("td",ft,[t("input",{onInput:x=>d.changedQuantity(x,i),value:i.quantity,type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-3 py-2"},null,40,_t)]),t("td",gt,[p(C,{onClick:x=>d.removeFromCart(i)},null,8,["onClick"])])]))),128))]),yt])])])):(s(),n("div",xt,vt))]),e.cartItems.length?(s(),n("div",bt,[kt,It,e.$page.props.user?(s(),n("button",{key:0,class:"w-full mt-8 text-sm bg-primary text-white px-6 py-3 block rounded-md text-center",onClick:o[0]||(o[0]=$((...i)=>d.placeOrder&&d.placeOrder(...i),["prevent"]))},[u.loading?(s(),n("div",$t,Bt)):(s(),n("span",St,"Get a Quotation now"))])):(s(),n("div",Ft,[e.cartItems.length?(s(),k(y,{key:0,class:"w-full mt-8 text-sm bg-primary text-white px-6 py-3 block rounded-md text-center text-decoration-none",href:e.route("login")},{default:m(()=>[I("Login to get a quotation")]),_:1},8,["href"])):h("",!0),qt,e.cartItems.length?(s(),k(y,{key:1,class:"w-full mt-8 text-sm bg-redish text-white px-6 py-3 block rounded-md text-center text-decoration-none",href:e.route("register")},{default:m(()=>[I("Sign up to get a quotation")]),_:1},8,["href"])):h("",!0)]))])):h("",!0)])])]),_:1})],64)}const Dt=_(tt,[["render",Tt],["__scopeId","data-v-d6347fc1"]]);export{Dt as default};
