import{L as R,ab as v,ac as B,bk as D,aS as m,af as t,_ as d,al as r,bm as s,bE as i,W as l,bD as N,ae as y,aX as Q,a1 as q}from"./runtime-dom.esm-bundler.585c24df.js";import{A as E}from"./VendorsLayout.e47167c1.js";import{u as L}from"./app.f1de3385.js";import"./ResponsiveNavLink.baeb7a52.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./NavLink.0007d28d.js";/* empty css            */const A={class:"font-semibold text-xl text-gray-800 leading-tight"},F={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},P={id:"invoice-app"},j={class:"header"},H=t("h1",null,"Quotation Builder",-1),M={class:"section-spacer"},O={class:"section-spacer"},W=t("p",null,[t("strong",null,"Bill to:")],-1),X=t("label",{for:"currency-picker mr-2 block"},"Currency:",-1),$=t("option",{value:"KES"},"Kenya Shilling",-1),z=[$],J={class:"responsive-table"},Y=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Book/Item"),t("th",null,"Price/unite"),t("th",null,"Quantity"),t("th",null,"Total"),t("th")])],-1),Z={"data-label":"No"},tt={"data-label":"Item"},et=["onUpdate:modelValue"],ot={"data-label":"Price/unite"},nt={class:"cell-with-input"},lt=["onUpdate:modelValue"],at={"data-label":"Quantity"},st=["onUpdate:modelValue"],it={"data-label":"Total"},dt={class:"text-right"},ut=["onClick"],rt=t("td",null,"Subtotal",-1),ct={class:"cell-with-input"},_t={class:"cell-with-input"},pt={class:"text-bold"},mt=t("td",null,[t("strong",null,"Grand Total")],-1),ht={class:"section-spacer"},vt=t("p",null,"Notes to the Customer:",-1),yt={key:0,class:"spinner-border",role:"status"},bt=t("span",{class:"visually-hidden"},"Please wait, Loading...",-1),gt=[bt],xt={key:1},Dt={__name:"Generate-Quotation",props:{order:Object},setup(b){var S,U,w,C;const c=b,g=R(!1),o=L({name:(S=c.order)==null?void 0:S.invoice_no,contact:"",client:(U=c.order)==null?void 0:U.customer.name,currency:"KES",discountRate:0,note:(w=c.order)==null?void 0:w.note,invoiceDate:new Date,taxRate:16,items:(C=c.order)==null?void 0:C.order_items,invoiceCurrency:{symbol:"KSh",name:"Kenya Shilling",symbol_native:"kes",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenya Shillings"}}),T=a=>{o.items.splice(a,1)},_=a=>o.invoiceCurrency.symbol+" "+Number(a).toFixed(o.invoiceCurrency.decimal_digits),f=a=>{var n=a.target;n.style.height="1px",n.style.height=25+n.scrollHeight+"px"},p=v(()=>{var a=o.items.reduce(function(n,e){return n+e.amount*e.quantity},0);return a}),h=v(()=>{var a=p.value*(o.discountRate/100);return a}),k=v(()=>{var a=(p.value-h.value)*(o.taxRate/100);return a}),V=v(()=>{var a=p.value-h.value+k.value;return a}),K=()=>{g.value=!0,o.transform(a=>({...a,sub_total:p.value,grand_total:V.value,total_discount:h.value,order:c.order})).post(route("quote.generator")),g.value=!1};return(a,n)=>(m(),B(E,{title:b.order.invoice_no},{header:D(()=>[t("h2",A," Order # "+d(b.order.invoice_no),1)]),default:D(()=>[t("div",F,[t("div",G,[t("div",I,[t("div",P,[t("div",j,[t("div",null,[H,t("p",null,[r("Date: "),s(t("input",{type:"date","onUpdate:modelValue":n[0]||(n[0]=e=>l(o).invoiceDate=e)},null,512),[[i,l(o).invoiceDate]])])]),t("div",null,[t("div",M,[s(t("input",{type:"text",placeholder:"Company Name",class:"company-name","onUpdate:modelValue":n[1]||(n[1]=e=>l(o).name=e),disabled:""},null,512),[[i,l(o).name]])]),t("div",O,[W,s(t("input",{type:"text",onKeyup:f,"onUpdate:modelValue":n[2]||(n[2]=e=>l(o).client=e),disabled:""},null,544),[[i,l(o).client]])])])]),t("div",null,[X,s(t("select",{id:"currency-picker","onUpdate:modelValue":n[3]||(n[3]=e=>l(o).currency=e),disabled:""},z,512),[[N,l(o).currency]])]),t("table",J,[Y,(m(!0),y(q,null,Q(l(o).items,(e,x)=>(m(),y("tr",{key:x},[t("td",Z,d(x+1),1),t("td",tt,[s(t("input",{type:"text","onUpdate:modelValue":u=>e.product.name=u},null,8,et),[[i,e.product.name]])]),t("td",ot,[t("div",nt,[r(d(l(o).invoiceCurrency.symbol)+" ",1),s(t("input",{type:"number",min:"0","onUpdate:modelValue":u=>e.amount=u},null,8,lt),[[i,e.amount]])])]),t("td",at,[s(t("input",{type:"number",min:"0","onUpdate:modelValue":u=>e.quantity=u},null,8,st),[[i,e.quantity]])]),t("td",it,d(_(e.amount*e.quantity)),1),t("td",dt,[t("button",{class:"btn btn-danger btn-sm",onClick:u=>T(x)},"Delete item",8,ut)])]))),128))]),t("table",null,[t("tr",null,[rt,t("td",null,d(_(l(p))),1)]),t("tr",null,[t("td",null,[t("div",ct,[r("Discount "),s(t("input",{class:"text-right",type:"number",min:"0",max:"100","onUpdate:modelValue":n[4]||(n[4]=e=>l(o).discountRate=e)},null,512),[[i,l(o).discountRate]]),r("%")])]),t("td",null,d(_(l(h))),1)]),t("tr",null,[t("td",null,[t("div",_t,[r("Tax "),s(t("input",{class:"text-right",type:"number",min:"0",max:"100","onUpdate:modelValue":n[5]||(n[5]=e=>l(o).taxRate=e)},null,512),[[i,l(o).taxRate]]),r("%")])]),t("td",null,d(_(l(k))),1)]),t("tr",pt,[mt,t("td",null,d(_(l(V))),1)])]),t("div",ht,[vt,s(t("textarea",{onKeyup:f,"onUpdate:modelValue":n[6]||(n[6]=e=>l(o).note=e)},null,544),[[i,l(o).note]])]),t("button",{onClick:K,class:"text-decoration-none px-6 py-3 hover:bg-green-400 font-semibold rounded-md bg-gray-600 text-white"},[g.value?(m(),y("div",yt,gt)):(m(),y("span",xt,"Save and Send Quotation"))])])])])])]),_:1},8,["title"]))}};export{Dt as default};
