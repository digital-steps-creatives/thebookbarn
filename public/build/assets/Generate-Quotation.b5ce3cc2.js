import{d as B,u as N,s as p,o as h,c as Q,w as D,a as t,t as a,g as v,l as i,U as d,h as n,W as q,e as y,i as E,F}from"./app.c8ed5195.js";import{A}from"./VendorsLayout.f752aaf7.js";import"./ResponsiveNavLink.7cde0fd6.js";import"./Banner.a041f3e7.js";import"./DropdownLink.8bb0b36d.js";import"./NavLink.3a584a96.js";const G={class:"font-semibold text-xl text-gray-800 leading-tight"},I={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},j={id:"invoice-app"},H={class:"header"},M=t("h1",null,"Quotation Builder",-1),O={class:"section-spacer"},W={class:"section-spacer"},$=t("p",null,[t("strong",null,"Bill to:")],-1),z=t("label",{for:"currency-picker mr-2 block"},"Currency:",-1),J=t("option",{value:"KES"},"Kenya Shilling",-1),X=[J],Y={class:"responsive-table"},Z=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Book/Item"),t("th",null,"Price/unite"),t("th",null,"Quantity"),t("th",null,"Total"),t("th")])],-1),tt={"data-label":"No"},et={"data-label":"Item"},ot=["onUpdate:modelValue"],nt={"data-label":"Price/unite"},lt={class:"cell-with-input"},st=["onUpdate:modelValue"],at={"data-label":"Quantity"},it=["onUpdate:modelValue"],dt={"data-label":"Total"},ut={class:"text-right"},rt=["onClick"],ct=t("td",null,"Subtotal",-1),_t={class:"cell-with-input"},mt={class:"cell-with-input"},pt={class:"cell-with-input"},ht={class:"text-bold"},vt=t("td",null,[t("strong",null,"Grand Total")],-1),yt={class:"section-spacer"},bt=t("p",null,"Notes to the Customer:",-1),gt={key:0,class:"spinner-border",role:"status"},xt=t("span",{class:"visually-hidden"},"Please wait, Loading...",-1),ft=[xt],kt={key:1},Dt={__name:"Generate-Quotation",props:{order:Object},setup(b){var C,U,S,T;const _=b,g=B(!1),e=N({name:(C=_.order)==null?void 0:C.invoice_no,contact:"",client:(U=_.order)==null?void 0:U.customer.name,currency:"KES",discountRate:0,note:(S=_.order)==null?void 0:S.note,invoiceDate:new Date,taxRate:16,commissionRate:10,items:(T=_.order)==null?void 0:T.order_items,invoiceCurrency:{symbol:"KSh",name:"Kenya Shilling",symbol_native:"kes",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenya Shillings"}}),R=l=>{e.items.splice(l,1)},u=l=>e.invoiceCurrency.symbol+" "+Number(l).toFixed(e.invoiceCurrency.decimal_digits),w=l=>{var s=l.target;s.style.height="1px",s.style.height=25+s.scrollHeight+"px"},r=p(()=>{var l=e.items.reduce(function(s,o){return s+o.amount*o.quantity},0);return l}),m=p(()=>{var l=r.value*(e.discountRate/100);return l}),x=p(()=>{var l=(r.value-m.value)*(e.taxRate/100);return l}),f=p(()=>{var l=(r.value-m.value)*(e.commissionRate/100);return l}),V=p(()=>{var l=r.value-m.value+x.value+f.value;return l}),K=()=>{g.value=!0,e.transform(l=>({...l,sub_total:r.value,grand_total:V.value,total_discount:m.value,commission:f.value,tax:x.value,order:_.order})).post(route("quote.generator")),g.value=!1};return(l,s)=>(h(),Q(A,{title:b.order.invoice_no},{header:D(()=>[t("h2",G," Order # "+a(b.order.invoice_no),1)]),default:D(()=>[t("div",I,[t("div",L,[t("div",P,[t("div",j,[t("div",H,[t("div",null,[M,t("p",null,[v("Date: "),i(t("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=o=>n(e).invoiceDate=o)},null,512),[[d,n(e).invoiceDate]])])]),t("div",null,[t("div",O,[i(t("input",{type:"text",placeholder:"Company Name",class:"company-name","onUpdate:modelValue":s[1]||(s[1]=o=>n(e).name=o),disabled:""},null,512),[[d,n(e).name]])]),t("div",W,[$,i(t("input",{type:"text",onKeyup:w,"onUpdate:modelValue":s[2]||(s[2]=o=>n(e).client=o),disabled:""},null,544),[[d,n(e).client]])])])]),t("div",null,[z,i(t("select",{id:"currency-picker","onUpdate:modelValue":s[3]||(s[3]=o=>n(e).currency=o),disabled:""},X,512),[[q,n(e).currency]])]),t("table",Y,[Z,(h(!0),y(F,null,E(n(e).items,(o,k)=>(h(),y("tr",{key:k},[t("td",tt,a(k+1),1),t("td",et,[i(t("input",{type:"text","onUpdate:modelValue":c=>o.product.name=c},null,8,ot),[[d,o.product.name]])]),t("td",nt,[t("div",lt,[v(a(n(e).invoiceCurrency.symbol)+" ",1),i(t("input",{type:"number",min:"0","onUpdate:modelValue":c=>o.amount=c},null,8,st),[[d,o.amount]])])]),t("td",at,[i(t("input",{type:"number",min:"0","onUpdate:modelValue":c=>o.quantity=c},null,8,it),[[d,o.quantity]])]),t("td",dt,a(u(o.amount*o.quantity)),1),t("td",ut,[t("button",{class:"btn btn-danger btn-sm",onClick:c=>R(k)},"Delete item",8,rt)])]))),128))]),t("table",null,[t("tr",null,[ct,t("td",null,a(u(n(r))),1)]),t("tr",null,[t("td",null,[t("div",_t,[v("Discount "),i(t("input",{class:"text-right",type:"number",min:"0",max:"100","onUpdate:modelValue":s[4]||(s[4]=o=>n(e).discountRate=o)},null,512),[[d,n(e).discountRate]]),v("%")])]),t("td",null,a(u(n(m))),1)]),t("tr",null,[t("td",null,[t("div",mt,"Tax "+a(n(e).taxRate)+"%",1)]),t("td",null,a(u(n(x))),1)]),t("tr",null,[t("td",null,[t("div",pt,"Commission Charged "+a(n(e).commissionRate)+"%",1)]),t("td",null,a(u(n(f))),1)]),t("tr",ht,[vt,t("td",null,a(u(n(V))),1)])]),t("div",yt,[bt,i(t("textarea",{onKeyup:w,"onUpdate:modelValue":s[5]||(s[5]=o=>n(e).note=o)},null,544),[[d,n(e).note]])]),t("button",{onClick:K,class:"text-decoration-none px-6 py-3 hover:bg-green-400 font-semibold rounded-md bg-gray-600 text-white"},[g.value?(h(),y("div",gt,ft)):(h(),y("span",kt,"Save and Send Quotation"))])])])])])]),_:1},8,["title"]))}};export{Dt as default};
