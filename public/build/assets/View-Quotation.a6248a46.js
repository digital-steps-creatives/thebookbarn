import{L as R,ab as v,ac as Q,bk as T,aS as c,af as t,_ as l,W as a,ae as y,aX as U,a1 as E,al as _,bm as m,bE as h}from"./runtime-dom.esm-bundler.585c24df.js";import{A as K}from"./VendorsLayout.e47167c1.js";import{u as N,c as q}from"./app.f1de3385.js";import{h as B}from"./moment.9709ab41.js";import"./ResponsiveNavLink.baeb7a52.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./NavLink.0007d28d.js";/* empty css            */const I={class:"font-semibold text-xl text-gray-800 leading-tight"},A={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},F={id:"invoice-app"},M={class:"header"},O=t("h1",null,"Quotation",-1),P={class:"section-spacer"},j=t("hr",null,null,-1),G={class:"responsive-table"},J=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Book/Item"),t("th",null,"Price/unite"),t("th",null,"Quantity"),t("th",null,"Total"),t("th")])],-1),W={"data-label":"No"},X={"data-label":"Item"},$=["onUpdate:modelValue"],z={"data-label":"Price/unite"},H={class:"cell-with-input"},Z={class:"pt-2"},tt=["onUpdate:modelValue"],et={"data-label":"Quantity"},ot=["onUpdate:modelValue"],nt={"data-label":"Total"},at={class:"text-right"},lt=["onClick"],st=t("td",null,"Sub Total",-1),it={class:"cell-with-input"},dt={class:"cell-with-input"},rt={class:"text-bold"},ut=t("td",null,[t("strong",null,"Grand Total")],-1),ct=t("hr",null,null,-1),_t={class:"flex w-full justify-end"},mt={key:0,class:"spinner-border",role:"status"},ht=t("span",{class:"visually-hidden"},"Please wait, Loading...",-1),pt=[ht],vt={key:1},St={__name:"View-Quotation",props:{order:Object},setup(b){var k,V,S;const i=b,x=R(!1),e=N({name:(k=i.order)==null?void 0:k.invoice_no,contact:"",client:(V=i.order)==null?void 0:V.customer.name,currency:"KES",discountRate:0,invoiceDate:new B(i.order.created_date).format("DD-MM-YYYY"),taxRate:16,commissionRate:10,commissionAmount:0,items:(S=i.order)==null?void 0:S.order_items,invoiceCurrency:{symbol:"KES",name:"Kenya Shilling",symbol_native:"KES",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenya Shillings"}}),C=n=>{e.items.splice(n,1)},r=n=>e.invoiceCurrency.symbol+" "+Number(n).toFixed(e.invoiceCurrency.decimal_digits),u=v(()=>{var n=e.items.reduce(function(s,o){return s+o.amount*o.quantity},0);return n}),p=v(()=>{var n=u.value*(e.discountRate/100);return n}),f=v(()=>{var n=(u.value-p.value)*(e.taxRate/100);return n}),w=v(()=>{var n=u.value-p.value+f.value;return n}),D=()=>{x.value=!0;let n={sub_total:u.value,grand_total:w.value,total_discount:p.value,order:i.order.id,items:i.order.order_items};q.post(route("accept.order.final",n)).then(s=>{s.data.status===200&&localStorage.setItem("orderItemready",JSON.stringify(s.data.order.id)),x.value=!1,window.location.href=route("checkout.order.final")})};return(n,s)=>(c(),Q(K,{title:b.order.invoice_no},{header:T(()=>[t("h2",I," Order # "+l(b.order.invoice_no),1)]),default:T(()=>[t("div",A,[t("div",L,[t("div",Y,[t("div",F,[t("div",M,[t("div",null,[O,t("p",null,"Created on: "+l(a(e).invoiceDate),1)]),t("div",null,[t("div",P,[t("p",null,"Quotation #: "+l(a(e).name),1),t("p",null,"Currency: "+l(a(e).currency),1)])])]),j,t("table",G,[J,(c(!0),y(E,null,U(a(e).items,(o,g)=>(c(),y("tr",{key:g},[t("td",W,l(g+1),1),t("td",X,[m(t("input",{type:"text","onUpdate:modelValue":d=>o.product.name=d},null,8,$),[[h,o.product.name]])]),t("td",z,[t("div",H,[t("span",Z,l(a(e).invoiceCurrency.symbol),1),_(),m(t("input",{type:"number",min:"0","onUpdate:modelValue":d=>o.amount=d,disabled:""},null,8,tt),[[h,o.amount]])])]),t("td",et,[m(t("input",{type:"number",min:"0","onUpdate:modelValue":d=>o.quantity=d},null,8,ot),[[h,o.quantity]])]),t("td",nt,l(r(o.amount*o.quantity)),1),t("td",at,[t("button",{class:"btn btn-danger btn-sm",onClick:d=>C(g)},"Delete item",8,lt)])]))),128))]),t("table",null,[t("tr",null,[st,t("td",null,l(r(a(u))),1)]),t("tr",null,[t("td",null,[t("div",it,[_("Discount "),m(t("input",{class:"text-right",type:"number",min:"0",max:"100","onUpdate:modelValue":s[0]||(s[0]=o=>a(e).discountRate=o)},null,512),[[h,a(e).discountRate]]),_("%")])]),t("td",null,l(r(a(p))),1)]),t("tr",null,[t("td",null,[t("div",dt,[_("Tax "),m(t("input",{class:"text-right",type:"number",min:"0",max:"100","onUpdate:modelValue":s[1]||(s[1]=o=>a(e).taxRate=o)},null,512),[[h,a(e).taxRate]]),_("%")])]),t("td",null,l(r(a(f))),1)]),t("tr",rt,[ut,t("td",null,l(r(a(w))),1)])]),ct,t("div",_t,[t("button",{onClick:D,class:"text-decoration-none px-6 py-3 hover:bg-green-400 font-semibold rounded-md bg-gray-600 text-white"},[x.value?(c(),y("div",mt,pt)):(c(),y("span",vt,"Accept Quotation"))])])])])])])]),_:1},8,["title"]))}};export{St as default};
