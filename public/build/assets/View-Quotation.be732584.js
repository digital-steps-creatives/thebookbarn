import{d as S,u as D,s as _,o as c,c as Q,w as f,a as t,t as e,h as d,e as h,i as V,g as K,l as N,U as R,F as q,V as A}from"./app.c8ed5195.js";import{A as B}from"./VendorsLayout.f752aaf7.js";import{h as E}from"./moment.9709ab41.js";import"./ResponsiveNavLink.7cde0fd6.js";import"./Banner.a041f3e7.js";import"./DropdownLink.8bb0b36d.js";import"./NavLink.3a584a96.js";const F={class:"font-semibold text-xl text-gray-800 leading-tight"},I={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},M={id:"invoice-app"},O={class:"header"},P=t("h1",null,"Quotation",-1),U={class:"section-spacer"},j=t("hr",null,null,-1),G={class:"responsive-table"},J=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Book/Item"),t("th",null,"Price/unit"),t("th",null,"Quantity"),t("th",null,"Total"),t("th")])],-1),$={"data-label":"No"},z={"data-label":"Item"},H={"data-label":"Price/unite"},W={class:"cell-with-input"},X={class:"pl-2"},Z={"data-label":"Quantity"},tt=["onUpdate:modelValue"],et={"data-label":"Total"},ot={class:"text-right"},nt=["onClick"],lt=t("td",null,"Sub Total",-1),at={class:"cell-with-input"},st=t("td",null,[t("div",{class:"cell-with-input"},"Tax ")],-1),it=t("td",null,[t("div",{class:"cell-with-input"},"Administration/Facilitation ")],-1),dt={class:"text-bold"},rt=t("td",null,[t("strong",null,"Grand Total")],-1),ct=t("hr",null,null,-1),ut={class:"flex w-full justify-end"},_t={key:0,class:"spinner-border",role:"status"},ht=t("span",{class:"visually-hidden"},"Please wait, Loading...",-1),mt=[ht],vt={key:1},kt={__name:"View-Quotation",props:{order:Object},setup(a){var y,b,g;const s=a,m=S(!1),n=D({name:(y=s.order)==null?void 0:y.invoice_no,contact:"",client:(b=s.order)==null?void 0:b.customer.name,currency:"KES",discountRate:0,invoiceDate:new E(s.order.created_date).format("DD-MM-YYYY"),taxRate:16,commissionRate:10,commissionAmount:0,items:(g=s.order)==null?void 0:g.order_items,invoiceCurrency:{symbol:"KES",name:"Kenya Shilling",symbol_native:"KES",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenya Shillings"}}),w=o=>{n.items.splice(o,1)},i=o=>n.invoiceCurrency.symbol+" "+Number(o).toFixed(n.invoiceCurrency.decimal_digits),u=_(()=>{var o=n.items.reduce(function(r,l){return r+l.amount*l.quantity},0);return o}),v=_(()=>{var o=u.value*(n.discountRate/100);return o}),k=_(()=>{var o=(u.value-v.value)*(n.taxRate/100);return o}),T=_(()=>{var o=u.value-v.value+k.value;return o}),C=()=>{m.value=!0;let o={sub_total:u.value,grand_total:T.value,total_discount:v.value,order:s.order.id,items:s.order.order_items};A.post(route("accept.order.final",o)).then(r=>{r.data.status===200&&localStorage.setItem("orderItemready",JSON.stringify(r.data.order.id)),m.value=!1,window.location.href=route("checkout.order.final")})};return(o,r)=>(c(),Q(B,{title:a.order.invoice_no},{header:f(()=>[t("h2",F," Order # "+e(a.order.invoice_no),1)]),default:f(()=>[t("div",I,[t("div",Y,[t("div",L,[t("div",M,[t("div",O,[t("div",null,[P,t("p",null,"Created on: "+e(d(n).invoiceDate),1)]),t("div",null,[t("div",U,[t("p",null,"Quotation #: "+e(d(n).name),1),t("p",null,"Currency: "+e(d(n).currency),1)])])]),j,t("table",G,[J,(c(!0),h(q,null,V(d(n).items,(l,p)=>(c(),h("tr",{key:p},[t("td",$,e(p+1),1),t("td",z,e(l.product.name),1),t("td",H,[t("div",W,[t("span",X,e(d(n).invoiceCurrency.symbol),1),K(" "+e(l.amount),1)])]),t("td",Z,[N(t("input",{type:"number",min:"0","onUpdate:modelValue":x=>l.quantity=x},null,8,tt),[[R,l.quantity]])]),t("td",et,e(i(l.amount*l.quantity)),1),t("td",ot,[t("button",{class:"btn btn-danger btn-sm",onClick:x=>w(p)},"Delete item",8,nt)])]))),128))]),t("table",null,[t("tr",null,[lt,t("td",null,e(i(a.order.sub_total)),1)]),t("tr",null,[t("td",null,[t("div",at,"Discount "+e(d(n).discountRate),1)]),t("td",null,e(i(a.order.total_discount)),1)]),t("tr",null,[st,t("td",null,e(i(a.order.tax)),1)]),t("tr",null,[it,t("td",null,e(i(a.order.commission)),1)]),t("tr",dt,[rt,t("td",null,e(i(a.order.grand_total)),1)])]),ct,t("div",ut,[t("button",{onClick:C,class:"text-decoration-none px-6 py-3 hover:bg-green-400 font-semibold rounded-md bg-gray-600 text-white"},[m.value?(c(),h("div",_t,mt)):(c(),h("span",vt,"Accept Quotation"))])])])])])])]),_:1},8,["title"]))}};export{kt as default};
